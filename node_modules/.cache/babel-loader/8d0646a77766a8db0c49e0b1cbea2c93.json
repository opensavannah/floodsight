{"ast":null,"code":"import _classCallCheck from \"/Users/carlvlewis/floodsight/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/carlvlewis/floodsight/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/carlvlewis/floodsight/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/carlvlewis/floodsight/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/carlvlewis/floodsight/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/carlvlewis/floodsight/src/components/Dashboard/CrossingStatusHistory/CrossingStatusHistoryFilter.js\";\nimport React, { Component } from 'react';\nimport { graphql } from 'react-apollo';\nimport moment from 'moment';\nimport ButtonSecondary from 'components/Shared/Button/ButtonSecondary';\nimport ButtonPrimary from 'components/Shared/Button/ButtonPrimary';\nimport Dropdown from 'components/Shared/Form/Dropdown';\nimport DatePicker from 'components/Shared/DatePicker';\nimport XIcon from 'components/Shared/Icons/XIcon';\nimport { ALL_COMMUNITIES_NAME, ALL_COMMUNITIES_INDEX } from 'constants/AppConstants';\nimport AllCommunitiesQuery from 'components/Shared/queries/AllCommunitiesQuery';\n\nvar HistoryFilter =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(HistoryFilter, _Component);\n\n  function HistoryFilter(_props) {\n    var _this;\n\n    _classCallCheck(this, HistoryFilter);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(HistoryFilter).call(this, _props));\n\n    _this.clearLowerBound = function () {\n      _this.setState({\n        dateLowerBound: null\n      });\n    };\n\n    _this.clearUpperBound = function () {\n      _this.setState({\n        dateUpperBound: null\n      });\n    };\n\n    _this.dateLowerBoundChanged = function (date) {\n      _this.setState({\n        dateLowerBound: date,\n        dateLowerBoundKey: new Date().toISOString()\n      });\n    };\n\n    _this.dateUpperBoundChanged = function (date) {\n      _this.setState({\n        dateUpperBound: date,\n        dateUpperBoundKey: new Date().toISOString()\n      });\n    };\n\n    _this.inclusiveEndDateChanged = function (value) {\n      _this.setState({\n        inclusiveEndDate: value\n      });\n    };\n\n    _this.communityIdChanged = function (e) {\n      _this.setState({\n        communityId: Number(e.target.value)\n      });\n    };\n\n    _this.onSubmit = function () {\n      _this.props.applyFilter({\n        communityId: _this.state.communityId,\n        dateLowerBound: _this.state.dateLowerBound,\n        dateUpperBound: _this.state.dateUpperBound,\n        inclusiveEndDate: _this.state.inclusiveEndDate\n      });\n    };\n\n    _this.onCancel = function () {\n      _this.setState(function (state, props) {\n        return {\n          communityId: props.communityId,\n          dateLowerBound: props.dateLowerBound,\n          dateUpperBound: props.dateUpperBound,\n          inclusiveEndDate: props.inclusiveEndDate\n        };\n      });\n    };\n\n    _this.state = {\n      communityId: _props.communityId,\n      dateLowerBound: _props.dateLowerBound,\n      dateLowerBoundKey: new Date().toISOString(),\n      dateUpperBound: _props.dateUpperBound,\n      dateUpperBoundKey: new Date().toISOString(),\n      inclusiveEndDate: _props.inclusiveEndDate\n    };\n    return _this;\n  }\n\n  _createClass(HistoryFilter, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$state = this.state,\n          communityId = _this$state.communityId,\n          dateLowerBound = _this$state.dateLowerBound,\n          dateLowerBoundKey = _this$state.dateLowerBoundKey,\n          dateUpperBound = _this$state.dateUpperBound,\n          dateUpperBoundKey = _this$state.dateUpperBoundKey,\n          inclusiveEndDate = _this$state.inclusiveEndDate;\n      var allCommunities;\n      var communitiesLoading = !this.props.AllCommunitiesQuery || this.props.AllCommunitiesQuery.loading;\n\n      if (communitiesLoading) {\n        return React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 90\n          },\n          __self: this\n        }, \"Loading...\");\n      }\n\n      allCommunities = this.props.AllCommunitiesQuery.allCommunities.nodes.filter(function (node) {\n        return node.id !== 1337 && node.id !== 9002;\n      });\n      allCommunities.unshift({\n        id: ALL_COMMUNITIES_INDEX,\n        name: ALL_COMMUNITIES_NAME\n      });\n      var isDirty = communityId !== this.props.communityId || dateLowerBound !== this.props.dateLowerBound || dateUpperBound !== this.props.dateUpperBound || inclusiveEndDate !== this.props.inclusiveEndDate;\n      return React.createElement(\"div\", {\n        className: \"HistoryFilter\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        },\n        __self: this\n      }, !this.props.crossingId && React.createElement(\"div\", {\n        className: \"HistoryFilter-community-row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105\n        },\n        __self: this\n      }, \"Community:\"), React.createElement(Dropdown, {\n        options: allCommunities,\n        selected: communityId,\n        onChange: this.communityIdChanged,\n        disabled: !this.props.canSelectCommunity,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"HistoryFilter-row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117\n        },\n        __self: this\n      }, \"Start Date:\"), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120\n        },\n        __self: this\n      }, React.createElement(DatePicker, {\n        date: dateLowerBound,\n        key: dateLowerBoundKey,\n        onChange: this.dateLowerBoundChanged,\n        maxDate: dateUpperBound ? moment(dateUpperBound).subtract(1, 'day').format('YYYY-MM-DD') : 'today',\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121\n        },\n        __self: this\n      }), dateLowerBound ? React.createElement(\"div\", {\n        style: {\n          \"display\": \"inline\"\n        },\n        className: \"clear-filter-icon\",\n        onClick: this.clearLowerBound,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131\n        },\n        __self: this\n      }, React.createElement(XIcon, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135\n        },\n        __self: this\n      })) : React.createElement(\"div\", {\n        className: \"CrossingListSpacer\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"HistoryFilter-row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141\n        },\n        __self: this\n      }, \"End Date:\"), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144\n        },\n        __self: this\n      }, React.createElement(DatePicker, {\n        date: dateUpperBound,\n        key: dateUpperBoundKey,\n        onChange: this.dateUpperBoundChanged,\n        minDate: dateLowerBound ? moment(dateLowerBound).add(1, 'day').format('YYYY-MM-DD') : null,\n        maxDate: \"today\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145\n        },\n        __self: this\n      }), dateUpperBound ? React.createElement(\"div\", {\n        className: \"clear-filter-icon\",\n        onClick: this.clearUpperBound,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156\n        },\n        __self: this\n      }, React.createElement(XIcon, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160\n        },\n        __self: this\n      })) : React.createElement(\"div\", {\n        className: \"CrossingListSpacer\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162\n        },\n        __self: this\n      }))), dateUpperBound && React.createElement(\"div\", {\n        className: \"HistoryFilter-row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167\n        },\n        __self: this\n      }, \"Include Data from End Date:\"), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"checkbox\",\n        checked: inclusiveEndDate,\n        onChange: function onChange() {\n          _this2.inclusiveEndDateChanged(!inclusiveEndDate);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171\n        },\n        __self: this\n      }))), isDirty && React.createElement(\"div\", {\n        className: \"EditUser__buttons\",\n        style: {\n          paddingLeft: 0\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182\n        },\n        __self: this\n      }, React.createElement(ButtonSecondary, {\n        className: \"EditUser__cancel-button\",\n        onClick: this.onCancel,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186\n        },\n        __self: this\n      }, \"Cancel\"), React.createElement(ButtonPrimary, {\n        className: \"EditUser__next-button\",\n        onClick: this.onSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192\n        },\n        __self: this\n      }, \"Apply\")));\n    }\n  }]);\n\n  return HistoryFilter;\n}(Component);\n\nexport default graphql(AllCommunitiesQuery, {\n  name: \"AllCommunitiesQuery\"\n})(HistoryFilter);","map":{"version":3,"sources":["/Users/carlvlewis/floodsight/src/components/Dashboard/CrossingStatusHistory/CrossingStatusHistoryFilter.js"],"names":["React","Component","graphql","moment","ButtonSecondary","ButtonPrimary","Dropdown","DatePicker","XIcon","ALL_COMMUNITIES_NAME","ALL_COMMUNITIES_INDEX","AllCommunitiesQuery","HistoryFilter","props","clearLowerBound","setState","dateLowerBound","clearUpperBound","dateUpperBound","dateLowerBoundChanged","date","dateLowerBoundKey","Date","toISOString","dateUpperBoundChanged","dateUpperBoundKey","inclusiveEndDateChanged","value","inclusiveEndDate","communityIdChanged","e","communityId","Number","target","onSubmit","applyFilter","state","onCancel","allCommunities","communitiesLoading","loading","nodes","filter","node","id","unshift","name","isDirty","crossingId","canSelectCommunity","subtract","format","add","paddingLeft"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { graphql } from 'react-apollo';\nimport moment from 'moment';\n\nimport ButtonSecondary from 'components/Shared/Button/ButtonSecondary';\nimport ButtonPrimary from 'components/Shared/Button/ButtonPrimary';\nimport Dropdown from 'components/Shared/Form/Dropdown';\nimport DatePicker from 'components/Shared/DatePicker';\nimport XIcon from 'components/Shared/Icons/XIcon';\nimport { ALL_COMMUNITIES_NAME, ALL_COMMUNITIES_INDEX } from 'constants/AppConstants';\nimport AllCommunitiesQuery from 'components/Shared/queries/AllCommunitiesQuery';\n\nclass HistoryFilter extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      communityId: props.communityId,\n      dateLowerBound: props.dateLowerBound,\n      dateLowerBoundKey: new Date().toISOString(),\n      dateUpperBound: props.dateUpperBound,\n      dateUpperBoundKey: new Date().toISOString(),\n      inclusiveEndDate: props.inclusiveEndDate\n    }\n  }\n\n  clearLowerBound = () => {\n    this.setState({dateLowerBound: null});\n  }\n\n  clearUpperBound = () => {\n    this.setState({dateUpperBound: null});\n  }\n\n  dateLowerBoundChanged = (date) => {\n    this.setState({\n      dateLowerBound: date,\n      dateLowerBoundKey: new Date().toISOString(),\n    });\n  }\n\n  dateUpperBoundChanged = (date) => {\n    this.setState({\n      dateUpperBound: date,\n      dateUpperBoundKey: new Date().toISOString(),\n    });\n  }\n\n  inclusiveEndDateChanged = (value) => {\n    this.setState({inclusiveEndDate: value});\n  }\n\n  communityIdChanged = (e) => {\n    this.setState({communityId: Number(e.target.value)});\n  }\n\n  onSubmit = () => {\n    this.props.applyFilter({\n      communityId: this.state.communityId,\n      dateLowerBound: this.state.dateLowerBound,\n      dateUpperBound: this.state.dateUpperBound,\n      inclusiveEndDate: this.state.inclusiveEndDate\n    });\n  }\n\n  onCancel = () => {\n    this.setState((state, props) => {\n      return {\n        communityId: props.communityId,\n        dateLowerBound: props.dateLowerBound,\n        dateUpperBound: props.dateUpperBound,\n        inclusiveEndDate: props.inclusiveEndDate\n      }\n    })\n  }\n\n  render() {\n    const {\n      communityId,\n      dateLowerBound,\n      dateLowerBoundKey,\n      dateUpperBound,\n      dateUpperBoundKey,\n      inclusiveEndDate,\n    } = this.state;\n\n    let allCommunities;\n    const communitiesLoading = !this.props.AllCommunitiesQuery || this.props.AllCommunitiesQuery.loading;\n    if (communitiesLoading) {\n      return <div>Loading...</div>\n    }\n    allCommunities = this.props.AllCommunitiesQuery.allCommunities.nodes.filter(node => node.id !== 1337 && node.id !== 9002);\n    allCommunities.unshift({id: ALL_COMMUNITIES_INDEX, name: ALL_COMMUNITIES_NAME})\n\n    const isDirty = (\n      (communityId !== this.props.communityId) ||\n      (dateLowerBound !== this.props.dateLowerBound) ||\n      (dateUpperBound !== this.props.dateUpperBound) ||\n      (inclusiveEndDate !== this.props.inclusiveEndDate)\n    )\n    return (\n      <div className=\"HistoryFilter\">\n        {!this.props.crossingId && (\n          <div className=\"HistoryFilter-community-row\">\n            <div>\n              Community:\n            </div>\n            <Dropdown\n              options={allCommunities}\n              selected={communityId}\n              onChange={this.communityIdChanged}\n              disabled={!this.props.canSelectCommunity}\n            />\n          </div>\n        )}\n        <div className=\"HistoryFilter-row\">\n          <div>\n            Start Date:\n          </div>\n          <div>\n            <DatePicker\n              date={dateLowerBound}\n              key={dateLowerBoundKey}\n              onChange={this.dateLowerBoundChanged}\n              maxDate={dateUpperBound ?\n                moment(dateUpperBound).subtract(1,'day').format('YYYY-MM-DD') :\n                'today'\n              }\n            />\n            {dateLowerBound ? (\n              <div style={{\"display\": \"inline\"}}\n                className='clear-filter-icon'\n                onClick={this.clearLowerBound}\n              >\n                <XIcon/>\n              </div>\n            ) : (<div className=\"CrossingListSpacer\" />)}\n          </div>\n        </div>\n        <div className=\"HistoryFilter-row\">\n          <div>\n            End Date:\n          </div>\n          <div>\n            <DatePicker\n              date={dateUpperBound}\n              key={dateUpperBoundKey}\n              onChange={this.dateUpperBoundChanged}\n              minDate={dateLowerBound ?\n                moment(dateLowerBound).add(1, 'day').format('YYYY-MM-DD') :\n                null\n              }\n              maxDate='today'\n            />\n            {dateUpperBound ? (\n              <div\n                className='clear-filter-icon'\n                onClick={this.clearUpperBound}\n              >\n                <XIcon/>\n              </div>\n            ) : (<div className=\"CrossingListSpacer\" />)}\n          </div>\n        </div>\n        {dateUpperBound && (\n          <div className=\"HistoryFilter-row\">\n            <div>\n              Include Data from End Date:\n            </div>\n            <div>\n              <input\n                type=\"checkbox\"\n                checked={inclusiveEndDate}\n                onChange={() => {\n                  this.inclusiveEndDateChanged(!inclusiveEndDate)\n                }}\n              />\n            </div>\n          </div>\n        )}\n        {isDirty && (\n          <div\n            className=\"EditUser__buttons\"\n            style={{paddingLeft: 0}}\n          >\n            <ButtonSecondary\n              className=\"EditUser__cancel-button\"\n              onClick={this.onCancel}\n            >\n              Cancel\n            </ButtonSecondary>\n            <ButtonPrimary\n              className=\"EditUser__next-button\"\n              onClick={this.onSubmit}\n            >\n              Apply\n            </ButtonPrimary>\n          </div>\n        )}\n      </div>\n    )\n  }\n}\n\nexport default graphql(AllCommunitiesQuery, {\n  name: \"AllCommunitiesQuery\"\n})(HistoryFilter)\n"]},"metadata":{},"sourceType":"module"}