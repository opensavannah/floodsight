{"ast":null,"code":"import _taggedTemplateLiteral from \"/Users/carlvlewis/floodsight/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nimport _classCallCheck from \"/Users/carlvlewis/floodsight/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/carlvlewis/floodsight/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/carlvlewis/floodsight/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/carlvlewis/floodsight/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/carlvlewis/floodsight/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/carlvlewis/floodsight/src/components/Dashboard/ManageUsersPage/EditUserPage.js\";\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteral([\"\\n  mutation(\\n    $userId: Int!\\n    $lastName: String!\\n    $firstName: String!\\n    $jobTitle: String!\\n    $phoneNumber: String!\\n  ) {\\n    editUser(\\n      input: {\\n        userId: $userId\\n        lastName: $lastName\\n        firstName: $firstName\\n        jobTitle: $jobTitle\\n        phoneNumber: $phoneNumber\\n      }\\n    ) {\\n      user {\\n        id\\n      }\\n    }\\n  }\\n\"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  query userById($userId: Int!) {\\n    userById(id: $userId) {\\n      id\\n      emailAddress\\n      firstName\\n      lastName\\n      jobTitle\\n      phoneNumber\\n      communityId\\n    }\\n  }\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport React, { Component } from 'react';\nimport gql from 'graphql-tag';\nimport { graphql, compose } from 'react-apollo';\nimport { Redirect } from 'react-router-dom';\nimport { logError } from 'services/logger';\nimport EditUser from 'components/Dashboard/ManageUsersPage/EditUser';\nimport Modal from 'components/Shared/Modal';\nimport ModalErrorMessage from 'components/Shared/Modal/ModalErrorMessage';\nimport ButtonPrimary from 'components/Shared/Button/ButtonPrimary';\n\nvar EditUserPage =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(EditUserPage, _Component);\n\n  function EditUserPage() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, EditUserPage);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(EditUserPage)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      redirect: false,\n      errorMessage: null\n    };\n\n    _this.editUser = function (user) {\n      _this.props.editUserMutation({\n        variables: {\n          userId: Number(_this.props.match.params.id),\n          firstName: user.firstName,\n          lastName: user.lastName,\n          jobTitle: user.jobTitle,\n          phoneNumber: user.phoneNumber\n        }\n      }).then(function (_ref) {\n        var data = _ref.data;\n\n        _this.setState({\n          redirect: true\n        });\n      }).catch(function (error) {\n        logError('there was an error sending the query', error);\n\n        _this.setState({\n          errorMessage: error.message\n        });\n      });\n    };\n\n    _this.closeErrorModal = function () {\n      _this.setState({\n        errorMessage: null\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(EditUserPage, [{\n    key: \"componentDidCatch\",\n    value: function componentDidCatch(err) {\n      logError(err);\n      this.setState({\n        errorMessage: err.message\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      if (this.state.redirect) {\n        return React.createElement(Redirect, {\n          to: \"/dashboard/users\",\n          push: true,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 49\n          },\n          __self: this\n        });\n      }\n\n      var currentUser = this.props.currentUser;\n      var isLoading = !this.props.UserByIdQuery || this.props.UserByIdQuery.loading;\n\n      if (isLoading) {\n        return React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 58\n          },\n          __self: this\n        }, \"Loading\");\n      }\n\n      var user = this.props.UserByIdQuery.userById;\n      return React.createElement(\"div\", {\n        className: \"EditUserPage\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64\n        },\n        __self: this\n      }, React.createElement(Modal, {\n        title: \"Edit User\",\n        isOpen: this.state.errorMessage !== null,\n        onClose: this.closeErrorModal,\n        footer: React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 70\n          },\n          __self: this\n        }, React.createElement(ButtonPrimary, {\n          onClick: this.closeErrorModal,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 71\n          },\n          __self: this\n        }, \"OK\")),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      }, React.createElement(ModalErrorMessage, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      }, this.state.errorMessage))), React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }, \"Edit User - \", user.firstName, \" \", user.lastName), React.createElement(EditUser, {\n        onCancel: function onCancel() {\n          return _this2.setState({\n            redirect: true\n          });\n        },\n        onSubmit: this.editUser,\n        currentUser: currentUser,\n        userToEdit: user,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return EditUserPage;\n}(Component);\n\nvar UserByIdQuery = gql(_templateObject());\nvar editUserMutation = gql(_templateObject2());\nexport default compose(graphql(UserByIdQuery, {\n  name: 'UserByIdQuery',\n  options: function options(ownProps) {\n    return {\n      variables: {\n        userId: Number(ownProps.match.params.id)\n      }\n    };\n  }\n}), graphql(editUserMutation, {\n  name: 'editUserMutation'\n}))(EditUserPage);","map":{"version":3,"sources":["/Users/carlvlewis/floodsight/src/components/Dashboard/ManageUsersPage/EditUserPage.js"],"names":["React","Component","gql","graphql","compose","Redirect","logError","EditUser","Modal","ModalErrorMessage","ButtonPrimary","EditUserPage","state","redirect","errorMessage","editUser","user","props","editUserMutation","variables","userId","Number","match","params","id","firstName","lastName","jobTitle","phoneNumber","then","data","setState","catch","error","message","closeErrorModal","err","currentUser","isLoading","UserByIdQuery","loading","userById","name","options","ownProps"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport gql from 'graphql-tag';\nimport { graphql, compose } from 'react-apollo';\nimport { Redirect } from 'react-router-dom';\n\nimport { logError } from 'services/logger';\nimport EditUser from 'components/Dashboard/ManageUsersPage/EditUser';\nimport Modal from 'components/Shared/Modal';\nimport ModalErrorMessage from 'components/Shared/Modal/ModalErrorMessage';\nimport ButtonPrimary from 'components/Shared/Button/ButtonPrimary';\n\nclass EditUserPage extends Component {\n  state = {\n    redirect: false,\n    errorMessage: null,\n  };\n\n  componentDidCatch(err) {\n    logError(err);\n    this.setState({ errorMessage: err.message });\n  }\n\n  editUser = user => {\n    this.props\n      .editUserMutation({\n        variables: {\n          userId: Number(this.props.match.params.id),\n          firstName: user.firstName,\n          lastName: user.lastName,\n          jobTitle: user.jobTitle,\n          phoneNumber: user.phoneNumber,\n        },\n      })\n      .then(({ data }) => {\n        this.setState({ redirect: true });\n      })\n      .catch(error => {\n        logError('there was an error sending the query', error);\n        this.setState({ errorMessage: error.message });\n      });\n  };\n\n  closeErrorModal = () => {\n    this.setState({ errorMessage: null });\n  };\n\n  render() {\n    if (this.state.redirect) {\n      return <Redirect to=\"/dashboard/users\" push />;\n    }\n\n    const { currentUser } = this.props;\n\n    const isLoading =\n      !this.props.UserByIdQuery || this.props.UserByIdQuery.loading;\n\n    if (isLoading) {\n      return <div>Loading</div>;\n    }\n\n    const user = this.props.UserByIdQuery.userById;\n\n    return (\n      <div className=\"EditUserPage\">\n        <Modal\n          title=\"Edit User\"\n          isOpen={this.state.errorMessage !== null}\n          onClose={this.closeErrorModal}\n          footer={\n            <div>\n              <ButtonPrimary onClick={this.closeErrorModal}>OK</ButtonPrimary>\n            </div>\n          }\n        >\n          <div className=\"\">\n            <ModalErrorMessage>{this.state.errorMessage}</ModalErrorMessage>\n          </div>\n        </Modal>\n        <h1>\n          Edit User - {user.firstName} {user.lastName}\n        </h1>\n        <EditUser\n          onCancel={() => this.setState({ redirect: true })}\n          onSubmit={this.editUser}\n          currentUser={currentUser}\n          userToEdit={user}\n        />\n      </div>\n    );\n  }\n}\n\nconst UserByIdQuery = gql`\n  query userById($userId: Int!) {\n    userById(id: $userId) {\n      id\n      emailAddress\n      firstName\n      lastName\n      jobTitle\n      phoneNumber\n      communityId\n    }\n  }\n`;\n\nconst editUserMutation = gql`\n  mutation(\n    $userId: Int!\n    $lastName: String!\n    $firstName: String!\n    $jobTitle: String!\n    $phoneNumber: String!\n  ) {\n    editUser(\n      input: {\n        userId: $userId\n        lastName: $lastName\n        firstName: $firstName\n        jobTitle: $jobTitle\n        phoneNumber: $phoneNumber\n      }\n    ) {\n      user {\n        id\n      }\n    }\n  }\n`;\n\nexport default compose(\n  graphql(UserByIdQuery, {\n    name: 'UserByIdQuery',\n    options: ownProps => ({\n      variables: {\n        userId: Number(ownProps.match.params.id),\n      },\n    }),\n  }),\n  graphql(editUserMutation, {\n    name: 'editUserMutation',\n  }),\n)(EditUserPage);\n"]},"metadata":{},"sourceType":"module"}