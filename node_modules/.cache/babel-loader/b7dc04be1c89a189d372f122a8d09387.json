{"ast":null,"code":"import decode from 'jwt-decode';\nimport { isTokenValid } from './jwtHelper';\nvar auth = {\n  isAuthenticated: function isAuthenticated() {\n    try {\n      var token = localStorage.getItem('jwt_user_token');\n      if (token === null || token === 'null') return false;\n      return isTokenValid(token);\n    } catch (e) {\n      return false;\n    }\n  },\n  getRole: function getRole() {\n    try {\n      var token = localStorage.getItem('jwt_user_token');\n      if (token === null || token === 'null') return null;\n      return isTokenValid(token) ? decode(token).role : false;\n    } catch (e) {\n      return null;\n    }\n  },\n  roleAuthorized: function roleAuthorized(permittedRoles) {\n    return permittedRoles.includes(this.getRole());\n  },\n  signout: function signout(cb) {\n    localStorage.removeItem('jwt_user_token');\n    cb.call();\n  }\n};\nexport default auth;","map":{"version":3,"sources":["/Users/carlvlewis/floodsight/src/services/gqlAuth.js"],"names":["decode","isTokenValid","auth","isAuthenticated","token","localStorage","getItem","e","getRole","role","roleAuthorized","permittedRoles","includes","signout","cb","removeItem","call"],"mappings":"AAAA,OAAOA,MAAP,MAAmB,YAAnB;AACA,SAASC,YAAT,QAA6B,aAA7B;AAEA,IAAMC,IAAI,GAAG;AACXC,EAAAA,eADW,6BACO;AAChB,QAAI;AACF,UAAIC,KAAK,GAAGC,YAAY,CAACC,OAAb,CAAqB,gBAArB,CAAZ;AACA,UAAIF,KAAK,KAAK,IAAV,IAAkBA,KAAK,KAAK,MAAhC,EAAwC,OAAO,KAAP;AACxC,aAAOH,YAAY,CAACG,KAAD,CAAnB;AACD,KAJD,CAIE,OAAOG,CAAP,EAAU;AACV,aAAO,KAAP;AACD;AACF,GATU;AAWXC,EAAAA,OAXW,qBAWD;AACR,QAAI;AACF,UAAIJ,KAAK,GAAGC,YAAY,CAACC,OAAb,CAAqB,gBAArB,CAAZ;AACA,UAAIF,KAAK,KAAK,IAAV,IAAkBA,KAAK,KAAK,MAAhC,EAAwC,OAAO,IAAP;AACxC,aAAOH,YAAY,CAACG,KAAD,CAAZ,GAAsBJ,MAAM,CAACI,KAAD,CAAN,CAAcK,IAApC,GAA2C,KAAlD;AACD,KAJD,CAIE,OAAOF,CAAP,EAAU;AACV,aAAO,IAAP;AACD;AACF,GAnBU;AAqBXG,EAAAA,cArBW,0BAqBIC,cArBJ,EAqBoB;AAC7B,WAAOA,cAAc,CAACC,QAAf,CAAwB,KAAKJ,OAAL,EAAxB,CAAP;AACD,GAvBU;AAyBXK,EAAAA,OAzBW,mBAyBHC,EAzBG,EAyBC;AACVT,IAAAA,YAAY,CAACU,UAAb,CAAwB,gBAAxB;AACAD,IAAAA,EAAE,CAACE,IAAH;AACD;AA5BU,CAAb;AA+BA,eAAed,IAAf","sourcesContent":["import decode from 'jwt-decode';\nimport { isTokenValid } from './jwtHelper';\n\nconst auth = {\n  isAuthenticated() {\n    try {\n      var token = localStorage.getItem('jwt_user_token');\n      if (token === null || token === 'null') return false;\n      return isTokenValid(token);\n    } catch (e) {\n      return false;\n    }\n  },\n\n  getRole() {\n    try {\n      var token = localStorage.getItem('jwt_user_token');\n      if (token === null || token === 'null') return null;\n      return isTokenValid(token) ? decode(token).role : false;\n    } catch (e) {\n      return null;\n    }\n  },\n\n  roleAuthorized(permittedRoles) {\n    return permittedRoles.includes(this.getRole());\n  },\n\n  signout(cb) {\n    localStorage.removeItem('jwt_user_token');\n    cb.call();\n  },\n};\n\nexport default auth;\n"]},"metadata":{},"sourceType":"module"}